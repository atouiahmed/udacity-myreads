(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){},23:function(e,t,n){e.exports=n(36)},34:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(20),c=n.n(r),i=n(12),s=n(22),l=n(11),u=n(2),h=n(3),p=n(5),d=n(4),m=n(6),b=(n(14),function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.text;return o.a.createElement("option",{value:t},n)}}]),t}(a.Component)),f="https://reactnd-books-api.udacity.com",k=localStorage.token;k||(k=localStorage.token=Math.random().toString(36).substr(-8));var v={Accept:"application/json",Authorization:k},O=function(e,t){return fetch("".concat(f,"/books/").concat(e.id),{method:"PUT",headers:Object(l.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},y=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).handleSelectChange=function(e){n.props.onOptionSelect(e,n.props.book)},n}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{onChange:function(t){return e.handleSelectChange(t.target.value)}},o.a.createElement("option",{value:"move",disabled:!0,selected:!0},"Move to..."),o.a.createElement(b,{value:"currentlyReading",text:"Currently Reading"}),o.a.createElement(b,{value:"wantToRead",text:"Want to Read"}),o.a.createElement(b,{value:"read",text:"Read"}),o.a.createElement(b,{value:"none",text:"None"})))}}]),t}(a.Component),j=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.book,n=e.onOptionSelect,a=t.title,r=t.authors,c=t.imageLinks;return o.a.createElement("li",null,o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(c?c.thumbnail:"",")")}}),o.a.createElement(y,{onOptionSelect:n,book:t})),o.a.createElement("div",{className:"book-title"},a),r&&o.a.createElement("div",{className:"book-authors"},r.join(" , "))))}}]),t}(a.Component),E=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.books,a=e.onOptionSelect;return o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},t),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},n.map(function(e){return o.a.createElement(j,{onOptionSelect:a,key:e.id,book:e})}))))}}]),t}(a.Component),S=n(0),g=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={query:"",books:[]},n.closeSearch=function(){n.props.onCloseSearch()},n.handleInputChange=function(e){n.setState(function(){return{query:e}}),e?n.doSearch(e):n.emptyBooks()},n.setBooks=function(e){n.setState(function(){return{books:e}})},n.emptyBooks=function(){n.setBooks([])},n}return Object(m.a)(t,e),Object(h.a)(t,[{key:"doSearch",value:function(e){var t,n=this;(t=e,fetch("".concat(f,"/search"),{method:"POST",headers:Object(l.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({query:t})}).then(function(e){return e.json()}).then(function(e){return e.books})).then(function(e){e&&!e.error?n.setBooks(e):n.emptyBooks()})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"app"},o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement("button",{className:"close-search",onClick:this.closeSearch},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{onKeyUp:function(t){return e.handleInputChange(t.target.value)},type:"text",placeholder:"Search by title or author"}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ol",{className:"books-grid"},this.state.books.map(function(t){return o.a.createElement(j,{key:t.id,book:t,onOptionSelect:e.props.onOptionSelect})})))))}}]),t}(o.a.Component),N=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).goSearch=function(){n.props.onGoSearch()},n}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.lists,t=e.currentlyReading,n=e.wantToRead,a=e.read;return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,o.a.createElement(E,{title:"Currently Reading",books:t,onOptionSelect:this.props.onOptionSelect}),o.a.createElement(E,{title:"Want to Read",books:n,onOptionSelect:this.props.onOptionSelect}),o.a.createElement(E,{title:"Read",books:a,onOptionSelect:this.props.onOptionSelect}))),o.a.createElement("div",{className:"open-search"},o.a.createElement("button",{onClick:this.goSearch},"Add a book")))}}]),t}(o.a.Component),C=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={lists:{currentlyReading:[],wantToRead:[],read:[]}},n.handleSelectOptionChange=function(e,t){O(t,e),n.addBook(e,t)},n.setBooks=function(e){n.setState(function(){return{lists:{currentlyReading:e.filter(function(e){return"currentlyReading"===e.shelf}),wantToRead:e.filter(function(e){return"wantToRead"===e.shelf}),read:e.filter(function(e){return"read"===e.shelf})}}})},n.addBook=function(e,t){n.removeBookFromLists(t),"none"!==e&&n.setState(function(n){return{lists:Object(l.a)({},n.lists,Object(i.a)({},e,Object(s.a)(n.lists[e]).concat([t])))}})},n.removeBookFromLists=function(e){n.setState(function(t){return{lists:{currentlyReading:t.lists.currentlyReading.filter(function(t){return t.id!==e.id}),wantToRead:t.lists.wantToRead.filter(function(t){return t.id!==e.id}),read:t.lists.read.filter(function(t){return t.id!==e.id})}}})},n}return Object(m.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(f,"/books"),{headers:v}).then(function(e){return e.json()}).then(function(e){return e.books}).then(function(t){e.setBooks(t)})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"app"},o.a.createElement(S.a,{exact:!0,path:"/",render:function(t){var n=t.history;return o.a.createElement(N,{onGoSearch:function(){n.push("/search")},onOptionSelect:e.handleSelectOptionChange,lists:e.state.lists})}}),o.a.createElement(S.a,{path:"/search",render:function(t){var n=t.history;return o.a.createElement(g,{onCloseSearch:function(){n.push("/")},onOptionSelect:e.handleSelectOptionChange})}}))}}]),t}(o.a.Component),R=(n(34),n(9));c.a.render(o.a.createElement(R.a,null,o.a.createElement(C,null)),document.getElementById("root"))}},[[23,2,1]]]);
//# sourceMappingURL=main.3c2c2ca1.chunk.js.map